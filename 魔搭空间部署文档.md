step1: 克隆项目空间
git lfs install
git clone http://oauth2:你的令牌@www.modelscope.cn/studios/iducle/Moments.git

step2: 环境变量
- 在创空间“设置→环境变量”新增 MODELSCOPE_KEY，值为你的访问令牌（形如 ms-xxxxxxxx，不含 oauth2: 前缀）
- 可选：MODELSCOPE_BASE_URL=https://api-inference.modelscope.cn/v1
- 可选：TEXT_MODEL、MULTIMODAL_MODEL 覆盖默认模型

step3: 代码入口与依赖
- README.md 顶部 YAML 已指定 entry_file: app.py、app_port: 7860
- 使用 Flask + OpenAI SDK，依赖见 requirements.txt
- Dockerfile 已配置：
  FROM modelscope-registry.cn-beijing.cr.aliyuncs.com/modelscope-repo/python:3.10
  WORKDIR /home/user/app
  COPY ./ /home/user/app
  RUN pip install -r requirements.txt
  EXPOSE 7860
  ENTRYPOINT ["python", "-u", "app.py"]

step4: 推送更新
git add .
git commit -m "Update app and templates"
git push

step5: 重启空间
- 在创空间页面执行“重启空间展示”（首次设置或依赖更新建议“深度重启”）
- 访问 /__meta 查看路由列表，访问 /env_status 检查密钥是否读取

step6: 验证 AI
- 词卡：/api/word_card?word=moment&scene=
- 短语卡：/api/phrase_card?q=take%20a%20photo&kind=phrase
- 日记推荐问题在 diary 页面自动生成；异常时查看日志并重启

更多使用说明请参阅ModelScope文档中心
